# Bin 模块

## 项目整体结构
```
backend/
├── admin/          # 后台管理模块
├── bin/            # 项目入口
│   ├── src/
│   │   ├── main.rs         # 主程序入口
│   │   └── init.rs         # 服务器初始化
│   └── Cargo.toml          # 依赖配置
├── core/           # 核心基础库
├── customer/       # 客户前台模块
├── merchant/       # 商家前台模块
├── open_api/       # API 文档和路由整合
├── payment/        # 支付处理模块
├── config.toml     # 配置文件
└── Cargo.toml      # 项目依赖配置
```

## Bin 模块说明
项目入口模块，负责服务器初始化和启动。

### 主要功能
- 服务器初始化
  - 配置加载
  - 依赖初始化
  - 中间件配置
- 服务启动
  - 服务器配置
  - 工作线程管理
  - 优雅关闭
- 错误处理
  - 全局错误处理
  - 日志配置
  - 异常恢复

### 依赖说明
- salvo: Web框架
- tokio: 异步运行时
- tracing: 日志追踪
- serde: 序列化/反序列化
- ./core/src/config: 配置加载
- ./core/src/utils: 工具函数

## 概述与依赖

Bin 模块作为整个项目的入口点，负责服务器的初始化和启动。它主要依赖于 `core` 模块进行配置加载和初始化设置，并依赖于 `open_api` 模块获取整合后的路由配置。

## 程序入口与服务初始化

- 该模块包含：
  - [init.rs](./src/init.rs): 用于Salvo服务器的初始化设置，包括加载配置文件、建立数据库和 Redis 连接池等，依赖于core模块中的实体定义和配置文件加载。
  - [main.rs](./src/main.rs): 整个程序的入口，负责解析命令行参数、调用 `init.rs` 进行初始化，并启动 Salvo 服务器，实现优雅关机。
